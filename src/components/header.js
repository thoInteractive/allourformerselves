import { Link } from 'gatsby'
import PropTypes from 'prop-types'
import React, { useState, useEffect } from 'react'

import HeaderStyles from './styles/headerStyles'
import Menu from './menu'
import logo from '../images/logo--black.svg'

const Header = ({ siteTitle, containerRef, containerHeight }) => {
  const [headerFixed, setHeaderFixed] = useState(false)

  useEffect(() => {
    window.addEventListener('scroll', handleScroll)
  }, [])

  const handleScroll = () => {
    if (window.pageYOffset > 1) {
      setHeaderFixed(true)
    } else {
      setHeaderFixed(false)
    }
  }

  return (
    <HeaderStyles headerFixed={headerFixed}>
      <div className="container" ref={containerRef}>
        <Menu containerHeight={containerHeight} />
        <Link className="logo-link" to="/">
          <img className="logo" src={logo} alt="All Our Former Selves logo" />
        </Link>
        <a href="#" className="snipcart-checkout">
          <svg viewBox="0 0 24 22" version="1.1" x="0px" y="0px">
            <g stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
              <path
                d="M19.8971097,20.8756917 C20.4431091,20.8756917 20.886497,20.4323038 20.886497,19.8863044 C20.886497,19.3403049 20.4431091,18.896917 19.8971097,18.896917 C19.3511102,18.896917 18.9077223,19.3403049 18.9077223,19.8863044 C18.9077223,20.4323038 19.3511102,20.8756917 19.8971097,20.8756917 Z M19.8971097,21.8756917 C18.7988255,21.8756917 17.9077223,20.9845886 17.9077223,19.8863044 C17.9077223,18.7880202 18.7988255,17.896917 19.8971097,17.896917 C20.9953939,17.896917 21.886497,18.7880202 21.886497,19.8863044 C21.886497,20.9845886 20.9953939,21.8756917 19.8971097,21.8756917 Z M8.97493567,20.8756917 C9.52093512,20.8756917 9.96432303,20.4323038 9.96432303,19.8863044 C9.96432303,19.3403049 9.52093512,18.896917 8.97493567,18.896917 C8.42893622,18.896917 7.9855483,19.3403049 7.9855483,19.8863044 C7.9855483,20.4323038 8.42893622,20.8756917 8.97493567,20.8756917 Z M8.97493567,21.8756917 C7.87665147,21.8756917 6.9855483,20.9845886 6.9855483,19.8863044 C6.9855483,18.7880202 7.87665147,17.896917 8.97493567,17.896917 C10.0732199,17.896917 10.964323,18.7880202 10.964323,19.8863044 C10.964323,20.9845886 10.0732199,21.8756917 8.97493567,21.8756917 Z M22.3381781,5.9888932 L8.47847321,5.9888932 C8.20233084,5.9888932 7.97847321,5.76503558 7.97847321,5.4888932 C7.97847321,5.21275083 8.20233084,4.9888932 8.47847321,4.9888932 L23,4.9888932 C23.3318744,4.9888932 23.5716589,5.30628253 23.4809695,5.62552542 L20.6535813,15.5784293 C20.4395653,16.3318036 19.6788832,16.9110672 18.9038973,16.9110672 L9.47184067,16.9110672 C8.70990034,16.9110672 7.93113293,16.3499621 7.68989082,15.6254985 L4.16662299,5.04492688 C3.86862353,4.15001772 2.84977808,3.13662993 1.94721455,2.83892721 L0.843379234,2.47483675 C0.581134141,2.38833749 0.438663993,2.10562433 0.525163254,1.84337923 C0.611662514,1.58113414 0.894375672,1.43866399 1.15662077,1.52516325 L2.26045608,1.88925372 C3.46264565,2.28578548 4.71742713,3.53384545 5.1154028,4.72898881 L8.63867064,15.3095605 C8.74384705,15.6254111 9.14031403,15.9110672 9.47184067,15.9110672 L18.9038973,15.9110672 C19.2302741,15.9110672 19.5993632,15.6300038 19.6916424,15.3051649 L22.3381781,5.9888932 Z"
                fill="#333"
                fillRule="nonzero"
              />
            </g>
          </svg>
        </a>
      </div>
    </HeaderStyles>
  )
}

Header.propTypes = {
  siteTitle: PropTypes.string,
}

Header.defaultProps = {
  siteTitle: ``,
}

export default Header
